<div class="container my-3">
  <div class="card">
    <div class="card-body">
      <h2 class="card-title mb-4">Passo 1: Dados da Receita</h2>
      
      <!-- Loading Indicator -->
      <div *ngIf="isLoadingRecipe()" class="alert alert-info text-center" role="alert">
        Carregando dados da receita, por favor aguarde...
      </div>

      <!-- Error Message -->
      <div *ngIf="loadError()" class="alert alert-danger" role="alert">
        {{ loadError() }}
      </div>

      <!-- Form Fields -->
      <div
        [style.opacity]="isLoadingRecipe() ? '0.5' : '1'"
        [style.pointer-events]="isLoadingRecipe() ? 'none' : 'auto'"
      >
        <div class="mb-3">
          <label class="form-label">Nome da Receita:</label>
          <input
            class="form-control"
            type="text"
            [(ngModel)]="name"
            (ngModelChange)="onFieldChange()"
            placeholder="Digite o nome da receita"
            [disabled]="isLoadingRecipe()"
          />
        </div>

        <div class="mb-3">
          <label class="form-label">Ingredientes:</label>
          <textarea
            class="form-control"
            rows="3"
            [(ngModel)]="ingredients"
            (ngModelChange)="onFieldChange()"
            placeholder="Liste os ingredientes (um por linha)"
            [disabled]="isLoadingRecipe()"
          ></textarea>
        </div>

        <div class="mb-3">
          <label class="form-label">Instruções:</label>
          <textarea
            class="form-control"
            rows="3"
            [(ngModel)]="instructions"
            (ngModelChange)="onFieldChange()"
            placeholder="Descreva o modo de preparo"
            [disabled]="isLoadingRecipe()"
          ></textarea>
        </div>

        <div class="mb-3">
          <label class="form-label">Valor Total (R$):</label>
          <input
            class="form-control"
            type="number"
            min="0"
            step="0.01"
            [(ngModel)]="totalValue"
            (ngModelChange)="onFieldChange()"
            placeholder="0.00"
            [disabled]="isLoadingRecipe()"
          />
        </div>

        <div class="mb-3">
          <label class="form-label">Observações:</label>
          <textarea
            class="form-control"
            rows="2"
            [(ngModel)]="notes"
            (ngModelChange)="onFieldChange()"
            placeholder="Alguma observação (opcional)"
            [disabled]="isLoadingRecipe()"
          ></textarea>
        </div>

        <div class="mb-3">
          <label class="form-label">Autor:</label>
          <input
            class="form-control"
            type="text"
            [(ngModel)]="author"
            (ngModelChange)="onFieldChange()"
            placeholder="Nome do autor"
            [disabled]="isLoadingRecipe()"
          />
        </div>

        <div class="d-flex gap-2">
          <button
            class="btn btn-primary"
            (click)="saveAndNext()"
            [disabled]="!isFormValid || isLoadingRecipe()"
          >
            Próximo Passo
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
